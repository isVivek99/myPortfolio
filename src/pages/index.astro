---
import "../../base.css";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import MyImage from "../icons/image-3.png";
import ButtonPrimary from "../components/ButtonPrimary.astro";
import ButtonSecondary from "../components/ButtonSecondary.astro";
import Card from "../components/Card.astro";
import ListItem from "../components/ListItem.astro";
import TechStackMain from "../components/TechStackMain.astro";
import BlogCard from "../components/blogs/BlogCard.astro";
import BaseLayout from "../layout/BaseLayout.astro";
import { homeSEO } from "../utils/seoConfigs";
import { getSortedBlogs } from "../utils/contentCollecion";

const recentPosts = (await getSortedBlogs()).slice(0, 3);
---

<BaseLayout seo={homeSEO}>
  <section
    class="section-1 relative min-h-screen w-full snap-start pt-20 md:min-h-fit md:pt-32"
  >
    <div class="mb-24 flex flex-col lg:flex-row lg:justify-between">
      <div class="order-2 max-w-2xl lg:order-1">
        <div>
          <h1
            class="letters mt-10 cursor-pointer text-header font-bold leading-none tracking-tight xl:mt-0"
          >
            Hi there,<br class="block sm:hidden" /> I&apos;m <br
              class="hidden sm:block"
            />
            <div class="hidden md:block">
              <span class="letters__one -mr-[12px] hidden md:inline-block"
                >V</span
              >
              <span class="letters__two -mr-[12px] hidden md:inline-block"
                >i</span
              >
              <span class="letters__three -mr-[12px] hidden md:inline-block"
                >v</span
              >
              <span class="letters__four -mr-[12px] hidden md:inline-block"
                >e</span
              >
              <span class="letters__five -mr-[12px] hidden md:inline-block"
                >k</span
              >
              <span class="letters__five -mr-[12px] hidden md:inline-block"
                >&nbsp;</span
              >
              <span class="letters__six -mr-[12px] hidden md:inline-block"
                >L</span
              >
              <span class="letters__seven -mr-[12px] hidden md:inline-block"
                >o</span
              >
              <span class="letters__eight -mr-[12px] hidden md:inline-block"
                >k</span
              >
              <span class="letters__nine -mr-[12px] hidden md:inline-block"
                >h</span
              >
              <span class="letters__ten -mr-[12px] hidden md:inline-block"
                >a</span
              >
              <span class="letters__eleven -mr-[12px] hidden md:inline-block"
                >n</span
              >
              <span class="letters__twelve -mr-[12px] hidden md:inline-block"
                >d</span
              >
              <span class="letters__thirteen hidden md:inline-block">e</span>
              <span>.</span>
            </div>
            <span class="block md:hidden">Vivek Lokhande.</span>
          </h1>
          <p class="mt-10">
            I like tinkering with open source software. Experimenting with new
            frameworks.

            <br class="hidden lg:block" /> Lately getting interested in creating
            useful products which

            <br class="hidden lg:block" /> people can use.
          </p>
        </div>
        <div class="mt-20 flex flex-col gap-4 px-4 sm:flex-row md:px-0">
          <ButtonPrimary value="Read my blogs" href="/blogs" />
          <ButtonSecondary value="Resume" href="/resume" />
        </div>
      </div>
      <div class="imageCard group relative order-1 w-fit lg:order-2">
        <Icon
          name="circle"
          class="h-[150px] w-[150px] animate-spin-slow group-hover:animate-spin lg:h-[340px] lg:w-[340px]"
        />
        <Image
          loading={"eager"}
          src={MyImage}
          alt="my picture"
          class="imageCard__image absolute left-2 top-2.5 h-[132px] w-[132px] cursor-pointer opacity-0 ease-in-out lg:left-5 lg:top-5 lg:h-[300px] lg:w-[300px]"
        />
      </div>
    </div>
    <div
      class="item mb-24 hidden flex-col gap-8 lg:flex-row xl:flex xl:justify-between"
    >
      <Card
        cardTitle="About Me"
        cardWidth="xl:basis-2/3 basis-full"
        cardHeight=""
      >
        <p class="mt-4 tracking-tight">
          Hi there, I am Vivek, I am passionate about <strong>OSS</strong> and writing
          clean code.
        </p>

        <p class="mt-4 tracking-tight">
          My journey started as an engineer from a non-core background. I have
          transitioned into a <strong>CS</strong> background through my interest
          in robotics, motion graphics, video editing, programming, and now I work
          as an <strong>SWE</strong>.
        </p>
        <p class="mt-4 tracking-tight">
          I have completed my undergrad from Pune University. Most of the things
          I build or learn are still driven by my curiosity. I love talking
          about frontend development and attend various tech events where I gain
          more insights and get to interact with like-minded folks.
        </p>
        <p class="mt-4 tracking-tight">
          Feel free to reach out if you'd like to discuss anything related to
          frontend development, open-source projects, or just have a friendly
          chat about tech!
        </p>
      </Card>
      <Card
        cardTitle="Experience"
        cardWidth="basis-full w-full xl:basis-1/3"
        cardHeight=""
      >
        <ul>
          <ListItem
            imageObject="browserstack"
            orgName="BrowserStack"
            position="software engineer"
            tenure="March 2024 ‐ Present"
          />
          <ListItem
            imageObject="geekyants_logo"
            orgName="GEEKYANTS"
            position="software engineer-III"
            tenure="Dec 2023 ‐ March 2024"
          />
          <ListItem
            imageObject="geekyants_logo"
            orgName="GEEKYANTS"
            position="software engineer-II"
            tenure="Aug 2022 ‐ Dec 2023"
          />
          <ListItem
            imageObject="geekyants_logo"
            orgName="GEEKYANTS"
            position="software engineer-I"
            tenure="Aug 2021 ‐ Aug 2022"
          />
          <ListItem
            imageObject="geekyants_logo"
            orgName="Biencaps"
            position="motion graphics designer"
            tenure="June 2020 - Aug 2020"
          />
        </ul>
      </Card>
    </div>
  </section>
  <section
    class="item mb-24 flex min-h-screen snap-start flex-col items-center justify-center gap-8 md:min-h-fit md:items-baseline lg:flex-row xl:hidden xl:justify-between"
  >
    <Card
      cardTitle="About Me"
      cardWidth="xl:basis-2/3 basis-full"
      cardHeight=""
    >
      <p class="mt-4 tracking-tight">
        Hi there, I am vivek, I am passionate about OSS and writing clean code.
      </p>

      <p class="mt-4 tracking-tight">
        My journey started as a engineer from a non-core background. I have
        transitioned into a CS background through my interest in robotics,
        motion graphics, video editing, programming, and now I work as a SWE.
      </p>
      <p class="mt-4 tracking-tight">
        I have completed my undergrad from Pune University.Most of the things I
        build or learn is still driven by my curiosity. I love talking about
        frontend development and attend various tech events where I gain more
        insights and get to interact with like minded folks.
      </p>
      <p class="mt-4 tracking-tight">
        Feel free to reach out if you'd like to discuss anything related to
        frontend development, open-source projects, or just have a friendly chat
        about tech!
      </p>
    </Card>
    <Card
      cardTitle="Experience"
      cardWidth="basis-full w-full xl:basis-1/3"
      cardHeight="h-full"
    >
      <ul>
        <ListItem
          imageObject="browserstack"
          orgName="BROWSERSTACK"
          position="software engineer"
          tenure="Mar 2024 ‐ Present"
        />
        <ListItem
          imageObject="geekyants_logo"
          orgName="GEEKYANTS"
          position="software engineer-III"
          tenure="Dec 2023 ‐ Mar 2024"
        />
        <ListItem
          imageObject="geekyants_logo"
          orgName="GEEKYANTS"
          position="software engineer-II"
          tenure="Aug 2022 ‐ Dec 2023"
        />
        <ListItem
          imageObject="geekyants_logo"
          orgName="GEEKYANTS"
          position="software engineer-I"
          tenure="Aug 2021 ‐ Aug 2022"
        />
        <ListItem
          imageObject="biencaps_logo"
          orgName="Biencaps"
          position="motion graphics designer"
          tenure="June 2020 - Aug 2020"
        />
      </ul>
    </Card>
  </section>
  <section class="section-2 relative mb-32 mt-20 w-full snap-start">
    <h1
      class="mb-10 text-center text-4xl font-bold leading-none tracking-tight"
    >
      OSS Contributions
    </h1>
    <div class="mx-auto grid max-w-7xl grid-cols-1 gap-6 px-4">
      <Card hover cardWidth="w-full mx-auto sm:w-[480px]">
        <a
          href="https://github.com/withastro/astro/pull/13872"
          target="_blank"
          rel="noopener noreferrer"
          class="hover:bg-neutral-800 block rounded-lg p-4 transition-colors"
        >
          <div class="mb-4 flex items-center gap-3">
            <Icon name="astro_logo_figma" class="svgRotate h-8 w-8" />
            <span class="text-neutral-400 text-sm">PR #13872</span>
          </div>
          <h3 class="mb-2 text-lg font-medium">
            Fixes rendering of the download attribute
          </h3>
          <p class="text-neutral-400 text-sm">Merged on June 2, 2025</p>
        </a>
      </Card>

      <Card hover cardWidth="w-full mx-auto sm:w-[480px]">
        <a
          href="https://github.com/withastro/astro/pull/13909"
          target="_blank"
          rel="noopener noreferrer"
          class="hover:bg-neutral-800 block rounded-lg p-4 transition-colors"
        >
          <div class="mb-4 flex items-center gap-3">
            <Icon name="astro_logo_figma" class="svgRotate h-8 w-8" />
            <span class="text-neutral-400 text-sm">PR #13909</span>
          </div>
          <h3 class="mb-2 text-lg font-medium">
            Added support for HTML boolean attributes
          </h3>
          <p class="text-neutral-400 text-sm">Merged on June 20, 2025</p>
        </a>
      </Card>

      <Card hover cardWidth="w-full mx-auto sm:w-[480px]">
        <a
          href="https://github.com/withastro/astro/pull/13990"
          target="_blank"
          rel="noopener noreferrer"
          class="hover:bg-neutral-800 block rounded-lg p-4 transition-colors"
        >
          <div class="mb-4 flex items-center gap-3">
            <Icon name="astro_logo_figma" class="svgRotate h-8 w-8" />
            <span class="text-neutral-400 text-sm">PR #13990</span>
          </div>
          <h3 class="mb-2 text-lg font-medium">
            Fixed client/server config changes
          </h3>
          <p class="text-neutral-400 text-sm">Merged on June 25, 2025</p>
        </a>
      </Card>
    </div>
  </section>
  <section class="section-3 relative mb-32 mt-20 w-full snap-start">
    <TechStackMain />
  </section>
</BaseLayout>

<script>
  import { animate, spring, inView, stagger } from "motion";
  import "../scripts/home/letterAnimation";

  const cardElement = document.querySelector(".imageCard") as HTMLDivElement;

  inView(".section-3", () => {
    animate(
      ".svgRotate",
      { rotate: 360 },
      { easing: spring(), delay: stagger(0.1) },
    );
  });

  animate(".imageCard__image", { opacity: 1 }, { duration: 2 });
  animate(".imageCard", { scale: 0.95 });

  // Function to animate on hover
  function animateOnHover() {
    animate(".imageCard__image", { opacity: 1 }, { duration: 2 });
    animate(".imageCard", { scale: 1 });
  }

  // Function to reset animations on hover-out
  function resetAnimations() {
    animate(".imageCard__image", { opacity: 0.8 }, { duration: 2 });
    animate(".imageCard", { scale: 0.95 });
  }

  // Add event listeners
  cardElement.addEventListener("mouseover", animateOnHover);
  cardElement.addEventListener("mouseout", resetAnimations);

  // Carousel functionality
  document.addEventListener("DOMContentLoaded", () => {
    const track = document.querySelector(".carousel-track") as HTMLElement;
    const slides = document.querySelectorAll(".carousel-slide");
    const prevButton = document.querySelector(
      ".carousel-prev",
    ) as HTMLButtonElement;
    const nextButton = document.querySelector(
      ".carousel-next",
    ) as HTMLButtonElement;
    const dots = document.querySelectorAll(
      ".carousel-dot",
    ) as NodeListOf<HTMLButtonElement>;

    let currentSlide = 0;
    const totalSlides = slides.length;

    // Function to update carousel position
    function updateCarousel(slideIndex: number) {
      const slideWidth = slides[0].clientWidth + 32; // width + gap
      track.style.transform = `translateX(-${slideIndex * slideWidth}px)`;

      // Update dots
      dots.forEach((dot, index) => {
        dot.classList.toggle("bg-blue-600", index === slideIndex);
        dot.classList.toggle("bg-gray-300", index !== slideIndex);
      });

      currentSlide = slideIndex;
    }

    // Next button
    nextButton?.addEventListener("click", () => {
      const nextSlide = (currentSlide + 1) % totalSlides;
      updateCarousel(nextSlide);
    });

    // Previous button
    prevButton?.addEventListener("click", () => {
      const prevSlide = (currentSlide - 1 + totalSlides) % totalSlides;
      updateCarousel(prevSlide);
    });

    // Dot navigation
    dots.forEach((dot, index) => {
      dot.addEventListener("click", () => {
        updateCarousel(index);
      });
    });

    // Auto-play carousel (optional)
    setInterval(() => {
      const nextSlide = (currentSlide + 1) % totalSlides;
      updateCarousel(nextSlide);
    }, 5000); // Change slide every 5 seconds

    // Handle window resize
    window.addEventListener("resize", () => {
      updateCarousel(currentSlide);
    });
  });
</script>
